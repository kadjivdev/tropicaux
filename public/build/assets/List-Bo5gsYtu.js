import{u as b,r as N,a as w,j as e,H as y,L as v}from"./app-C0qC9c3f.js";import{A as k}from"./AuthenticatedLayout-D27tSET5.js";import{C as r}from"./index.esm-BmrsPqS2.js";import{S as t}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{M as S,S as C}from"./SecondaryButton-Q8PF6QdR.js";import{I}from"./InputLabel-DX9TLI61.js";import{T as L}from"./TextInput-Dp1AZfXX.js";import{I as P}from"./InputError-DPOehhsZ.js";import{P as E}from"./PrimaryButton-DnoI04TJ.js";import{c as M}from"./cil-library-add-Cbli5Ji_.js";import{c as a}from"./cil-cloud-download-CPU_poQw.js";import{c as _}from"./cil-info-CmGCY32x.js";import{c as A}from"./cil-send-haInf9fd.js";import{c as T}from"./cil-list-CLA-Txc1.js";import"./transition-Qo5xXNTm.js";import"./ApplicationLogo-DXihyPW9.js";import"./logo-spwKF6je.js";function Z({apprenants:n}){const d=b().props.auth.permissions,[m,i]=N.useState(!1),h=s=>d.some(l=>l.name==s),x=s=>{t.fire({text:`Profile de : ${s.parent?.firstname} - ${s.parent?.lastname}`,imageUrl:s.photo,imageWidth:400,imageHeight:200,imageAlt:"Photo de profil",confirmButtonColor:"#1b5a38",confirmButtonText:"Merci"})},p=s=>{s.preventDefault(),i(!0)},c=()=>{i(!1)},{data:D,setData:j,errors:u,processing:o,post:f}=w({parents:""}),g=s=>{s.preventDefault(),t.fire({title:"Opération en cours...",text:"Veuillez patienter pendant que nous traitons vos données.",allowOutsideClick:!1,didOpen:()=>{t.showLoading()}}),f(route("apprenant.import"),{onSuccess:()=>{t.close(),t.fire({icon:"success",title:"Opération réussie",text:"Importation effectuée avec succès"}),i(!1)},onError:l=>{t.close(),t.fire({icon:"error",title:"Opération échouée",text:`${l.exception??"Veuillez vérifier vos informations et réessayer."}`}),i(!1)}})};return e.jsxs(k,{header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:[e.jsx(r,{className:"text-success",icon:T})," Panel des listes d'apprenants"]}),children:[e.jsx(y,{title:"Les apprenants"}),e.jsx("div",{className:"row py-12 justify-content-center",children:e.jsx("div",{className:"col-md-10 bg-white p-4 shadow sm:rounded-lg sm:p-8 dark:bg-gray-800",children:e.jsxs("div",{className:"mx-auto _max-w-7xl space-y-6 sm:px-6 lg:px-8 ",style:{overflowX:"auto"},children:[h("apprenant.create")?e.jsxs("div",{className:"  items-center gap-4",children:[e.jsxs(v,{className:"mx-2 btn btn-sm bg-success bg-hover text-white",href:route("apprenant.create"),children:[" ",e.jsx(r,{className:"",icon:M})," Ajouter"]}),e.jsxs("button",{className:"btn btn-sm bg-success bg-hover text-white",onClick:s=>p(s),children:[" ",e.jsx(r,{className:"",icon:a})," Importer des apprenants"]})]}):null,e.jsxs("table",{className:"table table-striped",id:"myTable",style:{width:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"N°"}),e.jsx("th",{scope:"col",children:"Photo"}),e.jsx("th",{scope:"col",children:"Ecole"}),e.jsx("th",{scope:"col",children:"Nom"}),e.jsx("th",{scope:"col",children:"Prénom"}),e.jsx("th",{scope:"col",children:"Parent"}),e.jsx("th",{scope:"col",children:"Classe"}),e.jsx("th",{scope:"col",children:"Email"}),e.jsx("th",{scope:"col",children:"Adresse"}),e.jsx("th",{scope:"col",children:"Phone"}),e.jsx("th",{scope:"col",children:"Sexe"}),e.jsx("th",{scope:"col",children:"Date de naissance"}),e.jsx("th",{scope:"col",children:"Lieu de naissance"}),e.jsx("th",{scope:"col",children:"N° Educ Master"})]})}),e.jsx("tbody",{children:n.data.map((s,l)=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:l+1}),e.jsx("td",{children:s.photo?e.jsx("img",{src:s.photo,onClick:()=>x(s),className:"img-fluid img-circle shadow",srcSet:"",style:{width:"50px",height:"50px",borderRadius:"50%",border:"solid 5px #f6f6f6",cursor:"pointer"}}):"---"}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-light border text-dark border",children:s.school?.raison_sociale})}),e.jsx("td",{children:s.firstname}),e.jsx("td",{children:s.lastname}),e.jsxs("td",{children:[s.parent?.firstname," ",s.parent?.lastname]}),e.jsxs("td",{children:[s.classe?.libelle||"--"," - ",s.serie?.libelle||"--"," "]}),e.jsx("td",{children:s.email||"--"}),e.jsx("td",{children:s.adresse||"--"}),e.jsx("td",{children:s.phone||"--"}),e.jsx("td",{children:s.sexe||"--"}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-light border rounded text-dark",children:s.date_naissance||"--"})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-light border rounded text-dark",children:s.lieu_naissance||"--"})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-light border rounded text-dark",children:s.educ_master||"--"})})]},s.id))})]})]})})}),e.jsx(S,{show:m,onClose:c,children:e.jsxs("form",{onSubmit:g,className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:["Importation de nouveaux ",e.jsx("em",{className:"text-success",children:"apprenants"})]}),e.jsxs("p",{className:"alert alert-success",children:[e.jsx(r,{className:"text-success",icon:_}),e.jsxs("ul",{className:"",children:[e.jsx("li",{className:"",children:"Télecharger le modèle"}),e.jsx("li",{className:"",children:"Remplissez le modèle"}),e.jsx("li",{className:"",children:"Uploader le fichier remplit"})]})]}),e.jsx("div",{className:"my-2",children:e.jsxs("a",{target:"_blank",href:"/apprenants-model.xlsx",className:"w-100 text-white btn btn-sm bg-success btn-hover",children:[e.jsx(r,{icon:a}),"Télécharger le modèle"]})}),e.jsxs("div",{className:"my-2",children:[e.jsxs(I,{htmlFor:"apprenants",value:"Les apprenants en fichier excel",children:[" ",e.jsx("span",{className:"text-danger",children:"*"}),"  "]}),e.jsx(L,{type:"file",name:"apprenants",id:"apprenants",required:!0,className:"form-control mt-1 block w-full",onChange:s=>j("apprenants",s.target.files[0])}),e.jsx(P,{className:"mt-2",message:u.apprenants})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(C,{onClick:c,children:"Abandonner"}),e.jsxs(E,{disabled:o,children:[e.jsx(r,{icon:A})," ",o?"Enregistrement ...":"Enregistrer les modifications"]})]})]})})]})}export{Z as default};
