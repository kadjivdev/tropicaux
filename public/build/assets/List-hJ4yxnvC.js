import{u as b,r as N,a as w,j as e,H as y,L as v}from"./app-nfLeNANc.js";import{A as k,c as S}from"./AuthenticatedLayout-D4xPlrRy.js";import{C as r}from"./index.esm-Ba7oQv2p.js";import{S as t}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{M as C,S as I}from"./SecondaryButton-oSiX9qi2.js";import{I as L}from"./InputLabel-DqsbX5Yu.js";import{T as P}from"./TextInput-PL1pBLGW.js";import{I as E}from"./InputError-BqJsdPiL.js";import{P as M}from"./PrimaryButton-B561h_ZN.js";import{c as _}from"./cil-library-add-Cbli5Ji_.js";import{c as o,a as A}from"./cil-info-CGjZWabf.js";import{c as T}from"./cil-send-haInf9fd.js";import"./transition-7DJbAyG0.js";import"./ApplicationLogo-c86NVzuI.js";import"./logo-CPzApIsd.js";function Q({apprenants:n}){const d=b().props.auth.permissions,[m,a]=N.useState(!1),h=s=>d.some(l=>l.name==s),x=s=>{t.fire({text:`Profile de : ${s.parent?.firstname} - ${s.parent?.lastname}`,imageUrl:s.photo,imageWidth:400,imageHeight:200,imageAlt:"Photo de profil",confirmButtonColor:"#1b5a38",confirmButtonText:"Merci"})},p=s=>{s.preventDefault(),a(!0)},c=()=>{a(!1)},{data:D,setData:j,errors:u,processing:i,post:f}=w({parents:""}),g=s=>{s.preventDefault(),t.fire({title:"Opération en cours...",text:"Veuillez patienter pendant que nous traitons vos données.",allowOutsideClick:!1,didOpen:()=>{t.showLoading()}}),f(route("apprenant.import"),{onSuccess:()=>{t.close(),t.fire({icon:"success",title:"Opération réussie",text:"Importation effectuée avec succès"}),a(!1)},onError:l=>{t.close(),t.fire({icon:"error",title:"Opération échouée",text:`${l.exception??"Veuillez vérifier vos informations et réessayer."}`}),a(!1)}})};return e.jsxs(k,{header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:[e.jsx(r,{className:"text-success",icon:S})," Panel des listes d'apprenants"]}),children:[e.jsx(y,{title:"Les apprenants"}),e.jsx("div",{className:"row py-12 justify-content-center",children:e.jsx("div",{className:"col-md-10 bg-white p-4 shadow sm:rounded-lg sm:p-8 dark:bg-gray-800",children:e.jsxs("div",{className:"mx-auto _max-w-7xl space-y-6 sm:px-6 lg:px-8 ",style:{overflowX:"auto"},children:[h("apprenant.create")?e.jsxs("div",{className:"  items-center gap-4",children:[e.jsxs(v,{className:"mx-2 btn btn-sm bg-success bg-hover text-white",href:route("apprenant.create"),children:[" ",e.jsx(r,{className:"",icon:_})," Ajouter"]}),e.jsxs("button",{className:"btn btn-sm bg-success bg-hover text-white",onClick:s=>p(s),children:[" ",e.jsx(r,{className:"",icon:o})," Importer des apprenants"]})]}):null,e.jsxs("table",{className:"table table-striped",id:"myTable",style:{width:"100%"},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"N°"}),e.jsx("th",{scope:"col",children:"Photo"}),e.jsx("th",{scope:"col",children:"Ecole"}),e.jsx("th",{scope:"col",children:"Nom"}),e.jsx("th",{scope:"col",children:"Prénom"}),e.jsx("th",{scope:"col",children:"Parent"}),e.jsx("th",{scope:"col",children:"Classe"}),e.jsx("th",{scope:"col",children:"Email"}),e.jsx("th",{scope:"col",children:"Adresse"}),e.jsx("th",{scope:"col",children:"Phone"}),e.jsx("th",{scope:"col",children:"Sexe"}),e.jsx("th",{scope:"col",children:"Date de naissance"}),e.jsx("th",{scope:"col",children:"Lieu de naissance"}),e.jsx("th",{scope:"col",children:"N° Educ Master"})]})}),e.jsx("tbody",{children:n.data.map((s,l)=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",children:l+1}),e.jsx("td",{children:s.photo?e.jsx("img",{src:s.photo,onClick:()=>x(s),className:"img-fluid img-circle shadow",srcSet:"",style:{width:"50px",height:"50px",borderRadius:"50%",border:"solid 5px #f6f6f6",cursor:"pointer"}}):"---"}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-light border text-dark border",children:s.school?.raison_sociale})}),e.jsx("td",{children:s.firstname}),e.jsx("td",{children:s.lastname}),e.jsxs("td",{children:[s.parent?.firstname," ",s.parent?.lastname]}),e.jsxs("td",{children:[s.classe?.libelle||"--"," - ",s.serie?.libelle||"--"," "]}),e.jsx("td",{children:s.email||"--"}),e.jsx("td",{children:s.adresse||"--"}),e.jsx("td",{children:s.phone||"--"}),e.jsx("td",{children:s.sexe||"--"}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-light border rounded text-dark",children:s.date_naissance||"--"})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-light border rounded text-dark",children:s.lieu_naissance||"--"})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-light border rounded text-dark",children:s.educ_master||"--"})})]},s.id))})]})]})})}),e.jsx(C,{show:m,onClose:c,children:e.jsxs("form",{onSubmit:g,className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:["Importation de nouveaux ",e.jsx("em",{className:"text-success",children:"apprenants"})]}),e.jsxs("p",{className:"alert alert-success",children:[e.jsx(r,{className:"text-success",icon:A}),e.jsxs("ul",{className:"",children:[e.jsx("li",{className:"",children:"Télecharger le modèle"}),e.jsx("li",{className:"",children:"Remplissez le modèle"}),e.jsx("li",{className:"",children:"Uploader le fichier remplit"})]})]}),e.jsx("div",{className:"my-2",children:e.jsxs("a",{target:"_blank",href:"/apprenants-model.xlsx",className:"w-100 text-white btn btn-sm bg-success btn-hover",children:[e.jsx(r,{icon:o}),"Télécharger le modèle"]})}),e.jsxs("div",{className:"my-2",children:[e.jsxs(L,{htmlFor:"apprenants",value:"Les apprenants en fichier excel",children:[" ",e.jsx("span",{className:"text-danger",children:"*"}),"  "]}),e.jsx(P,{type:"file",name:"apprenants",id:"apprenants",required:!0,className:"form-control mt-1 block w-full",onChange:s=>j("apprenants",s.target.files[0])}),e.jsx(E,{className:"mt-2",message:u.apprenants})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(I,{onClick:c,children:"Abandonner"}),e.jsxs(M,{disabled:i,children:[e.jsx(r,{icon:T})," ",i?"Enregistrement ...":"Enregistrer les modifications"]})]})]})})]})}export{Q as default};
