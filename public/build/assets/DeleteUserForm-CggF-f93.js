import{j as e,r as m,u as b,a as S}from"./app-nfLeNANc.js";import{I as k}from"./InputError-BqJsdPiL.js";import{I as U}from"./InputLabel-DqsbX5Yu.js";import{M as H,S as V}from"./SecondaryButton-oSiX9qi2.js";import{T as D}from"./TextInput-PL1pBLGW.js";import{C as c}from"./index.esm-Ba7oQv2p.js";import{S as r}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{c as I}from"./cil-user-follow-9sfVD_63.js";import"./transition-7DJbAyG0.js";var d=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"];function f({className:a="",disabled:s,children:t,...o}){return e.jsx("button",{...o,className:`w-100 text-center items-center rounded-md border border-transparent bg-danger bg-hover px-4 py-2 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 active:bg-red-700 dark:focus:ring-offset-gray-800 ${s&&"opacity-25"} `+a,disabled:s,children:t})}function R({className:a=""}){const[s,t]=m.useState(!1),o=m.useRef(),l=b().props.auth.user;console.log("userAuth",l);const{data:x,setData:h,delete:g,processing:v,post:y,reset:u,errors:j,clearErrors:w}=S({password:""}),C=()=>{t(!0)},N=n=>{n.preventDefault(),r.fire({title:"Opération en cours ...",text:"Veuillez patienter quelque instant",allowOutsideClick:!1,didOpen:()=>{r.showLoading()}}),g(route("profile.destroy"),{preserveScroll:!0,onSuccess:()=>{i(),r.fire({icon:"error",title:"Opération éffectuée avec succès",text:"Compte supprimé avec succès!"}),y("logout")},onError:p=>{console.log(p),r.close(),r.fire({icon:"error",title:"Opération échouée",text:`${p.exception??"Une erreure est survenue au cours de la suppression du compte! Réessayer."}`}),o.current.focus()},onFinish:()=>u()})},i=()=>{t(!1),w(),u()};return e.jsxs("section",{className:`space-y-6 ${a}`,children:[e.jsxs("header",{children:[e.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:[e.jsx(c,{className:"text-danger",icon:I})," Suppression de compte"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Une fois votre compte supprimé, toutes ses ressources et données seront définitivement supprimées. Avant de supprimer votre compte, veuillez télécharger toutes les données ou informations que vous souhaitez conserver."})]}),e.jsxs(f,{disabled:l?.school_id,onClick:C,children:[e.jsx(c,{icon:d})," Supprimer le compte"]}),e.jsx(H,{show:s,onClose:i,children:e.jsxs("form",{onSubmit:N,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Êtes-vous sûr de vouloir supprimer votre compte ?"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Une fois votre compte supprimé, toutes ses ressources et données seront définitivement supprimées. Veuillez saisir votre mot de passe pour confirmer que vous souhaitez supprimer définitivement votre compte."}),e.jsxs("div",{className:"mt-6",children:[e.jsx(U,{htmlFor:"password",value:"Password",className:"sr-only"}),e.jsx(D,{id:"password",type:"password",name:"password",ref:o,value:x.password,onChange:n=>h("password",n.target.value),className:"mt-1 block w-3/4",isFocused:!0,placeholder:"Password"}),e.jsx(k,{message:j.password,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(V,{onClick:i,children:"Abandonner"}),e.jsxs(f,{className:"ms-3",disabled:v,children:[e.jsx(c,{icon:d}),"  Supprimer"]})]})]})})]})}export{R as default};
