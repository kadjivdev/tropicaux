import{r as p,j as e,a as j,u as b,H as w,L as m}from"./app-DLyd4duU.js";import{A as N,c as v}from"./AuthenticatedLayout-6ZOdJnfE.js";import{C as n}from"./index.esm-Ccn_HDGu.js";import{S as t}from"./sweetalert2.esm.all-Bj_ZQUAw.js";import{T as y}from"./TextInput-BGP6M7aR.js";import{c as C}from"./cib-addthis-BMGhLLu9.js";import{c as E}from"./cil-pencil-m516yCOw.js";import"./transition-DgEqXld3.js";import"./ApplicationLogo-D3wmqUPn.js";import"./logo-spwKF6je.js";var L=["32 32","<path d='M31.714 24.318c0.38 0.193 0.38 0.359 0 0.5l-15.146 6.964c-0.38 0.193-0.76 0.193-1.135 0l-15.146-6.964c-0.38-0.141-0.38-0.307 0-0.5l3.625-1.641c0.38-0.188 0.76-0.188 1.135 0l10.385 4.766c0.38 0.188 0.76 0.188 1.141 0l10.38-4.766c0.375-0.188 0.755-0.188 1.135 0zM31.714 15.714c0.38 0.193 0.38 0.38 0 0.568l-15.146 6.974c-0.38 0.135-0.76 0.135-1.135 0l-15.146-6.974c-0.38-0.193-0.38-0.38 0-0.568l3.625-1.635c0.38-0.193 0.76-0.193 1.135 0l10.385 4.76c0.38 0.188 0.76 0.188 1.141 0l10.38-4.76c0.375-0.193 0.755-0.193 1.135 0l3.625 1.63zM0.286 7.682c-0.38-0.193-0.38-0.359 0-0.5l15.146-6.969c0.375-0.188 0.76-0.188 1.135 0l15.146 6.974c0.38 0.141 0.38 0.307 0 0.5l-15.146 6.964c-0.38 0.193-0.76 0.193-1.135 0z'/>"],k=["32 32","<path d='M20.093 18.177c0 2.26-1.833 4.093-4.093 4.093s-4.093-1.833-4.093-4.093c0-5.459 8.187-5.459 8.187 0zM16 2.473c7.145 0.057 15.271 5.095 16 14.589h-9.677c0 0-1.244-5.245-6.323-5.208-5.079 0.031-6.323 5.208-6.323 5.208h-9.677c0.469-9.328 8.459-14.647 16-14.589zM16.068 29.527c-5.328 0.015-10.308-4.005-12.349-10.235h5.959c0 0 1.281 5.187 6.359 5.151 5.084-0.031 6.292-5.151 6.292-5.151h5.953c-1.328 6.588-6.885 10.219-12.213 10.235z'/>"];function S({text:l,limit:r=100}){const[c,o]=p.useState(!1);return e.jsxs("div",{children:[e.jsx("p",{children:c?l:l.slice(0,r)+(l.length>r?"...":"")}),l.length>r&&e.jsxs("button",{onClick:()=>o(!c),children:[e.jsx(n,{icon:k,className:"text-warning"})," ",c?"Voir moins":"Voir plus"]})]})}function _({campagnes:l}){const r=j().props.auth.permissions,c=s=>r.some(a=>a.name==s),[o,u]=p.useState(l.data),[x,z]=p.useState(l.data),{get:h}=b({}),f=(s,a)=>{s.preventDefault(),t.fire({title:'<span style="color: #facc15;">‚ö†Ô∏è Explorer la campagne ?</span>',text:`Exploration de la Campagne : ${a.libelle}`,showCancelButton:!0,confirmButtonColor:"#2a7348",cancelButtonColor:"#3085d6",confirmButtonText:"üòá Oui, Valider !",cancelButtonText:"Annuler"}).then(i=>{i.isConfirmed&&(t.fire({title:'<span style="color: #facc15;">ü´† Exploration en cours</span>',text:"Veuillez patienter...",allowOutsideClick:!1,didOpen:t.showLoading}),h(route("campagneSession",a.id),{onSuccess:()=>{t.fire({title:'<span style="color: #2a7348;">Session cr√©√©e !</span>',allowOutsideClick:!1,didOpen:t.showLoading}),h(route("dashboard"),{onSuccess:()=>{t.close(),t.fire({title:'<span style="color: #2a7348;">Exploration en cours...</span>',text:`Bienvenue dans la campagne : ${a.libelle}`,confirmButtonText:"üòá Fermer"})},onError:d=>{t.close(),t.fire({title:'<span style="color: #facc15;">ü§¶‚Äç‚ôÇÔ∏è Erreur Dashboard</span>',text:d.exception??"Veuillez r√©essayer."})}})},onError:d=>{t.close(),t.fire({title:'<span style="color: #facc15;">ü§¶‚Äç‚ôÇÔ∏è Erreur g√©n√©ration session</span>',text:d.exception??"Veuillez r√©essayer."})}}))})},g=s=>{if(!s){u(x);return}const a=x.filter(i=>i.libelle.toLowerCase().includes(s.toLowerCase())||i.description.toLowerCase().includes(s.toLowerCase()));u(a)};return e.jsxs(N,{menu:!1,header:e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200",children:[e.jsx(n,{className:"text-success",icon:v})," Gestion des campagnes"]}),children:[e.jsx(w,{title:"Les Campagnes"}),e.jsx("div",{className:"row py-12 justify-content-center",children:e.jsx("div",{className:"col-md-10 bg-white p-4 shadow sm:rounded-lg sm:p-8 dark:bg-gray-800",children:e.jsxs("div",{className:"mx-auto _max-w-7xl space-y-6 sm:px-6 lg:px-8 ",style:{overflowX:"auto"},children:[c("campagne.create")?e.jsx("div",{className:"text-center  items-center gap-4",children:e.jsxs(m,{className:"btn w-50 bg-success bg-hover text-white",href:route("campagne.create"),children:[" ",e.jsx(n,{className:"",icon:C})," Ajouter"]})}):null,e.jsx("div",{className:"row d-flex justify-content-center",children:e.jsx("div",{className:"col-8",children:e.jsx(y,{type:"search",isFocused:!0,className:"w-full",placeholder:"Rechercher une campagne ....",onChange:s=>g(s.target.value)})})}),e.jsx("br",{}),e.jsx("div",{className:"row m-3",children:o.length>0?o.map(s=>e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card shadow w-100","uk-scrollspy":"cls: uk-animation-slide-top",style:{border:"3px solid #f6f6f6",borderRadius:"20px"},children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-uppercase text-center bg-light",children:s.libelle}),e.jsx("div",{className:"card-text",children:e.jsx(S,{text:s.description,limit:20})}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs(m,{className:"btn w-100 btn-light bg-hover border mx-1 text-warning",href:route("campagne.edit",s.id),children:[" ",e.jsx(n,{className:"",icon:E})," Modifier"]}),e.jsxs(m,{className:"btn w-100 bg-success bg-hover text-white",onClick:a=>f(a,s),children:[" ",e.jsx(n,{className:"",icon:L})," Explorer"]})]})]})})},s.id)):e.jsx("p",{className:"text-center text-danger",children:"Aucun √©lement trouv√©"})})]})})})]})}export{_ as default};
